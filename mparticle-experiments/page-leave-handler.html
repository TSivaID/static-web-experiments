<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>mParticle Experiments</title><link rel="stylesheet" href="https://tsivaid.github.io/static-web-experiments/index.c6c1952f.css"></head><body> <header> <h1>mParticle Experiments</h1> </header> <main> <h2>Better Event handler for Page Navigation related events</h2> <ul> <li>`pagehide` if browser supported</li> <li>`beforeunload` otherwise</li> </ul> <a id="home-link" href="https://tsivaid.github.io/static-web-experiments/mparticle-experiments/index.html">Home</a> - Click "Home" to see `click` and `scroll_depth` custom mParticle events <p><strong>Tested browsers for `click` and `scroll_depth` events:</strong></p> <ul> <li>Chrome 111.0.5563.146 (Mac)</li> <li>Firefox/110.0 (Mac)</li> <li>Safari/605.1.15 (Mac)</li> <li>Edge/111.0.1661.54 (Mac)</li> <li>Chrome/111.0.0.0 (Android 13)</li> </ul></main> <footer> <p>&copy; 2023</p> </footer> <script>window.mParticle={config:{rq:[],appVersion:"1.0.0",customFlags:{},identifyRequest:{userIdentities:{customerid:"",email:""}},identityCallback:function(){},isDebug:!0,isDevelopmentMode:!0,isSandbox:!0,sessionTimeout:30,useCookieStorage:!0,useNativeSdk:!1,ready:function(e){window.mParticle.config.rq.push(e)}}};var el=document.createElement("script");function trackPageLeave(e){"onpagehide"in window?window.addEventListener("pagehide",(function(){e("pagehide")})):window.addEventListener("beforeunload",(function(){e("beforeunload")}))}function handlePageLeave(e){mParticle.logEvent("scroll_depth",mParticle.EventType.Navigation,{event_timestamp:(new Date).toISOString(),user_agent:window.navigator.userAgent,page_url:window.location.href,page_title:document.title,page_referrer:document.referrer,scroll_depth:"100%",event_hanlder:"pageleave+"+e})}el.async=!0,el.src="https://jssdkcdns.mparticle.com/js/v2/us1-a9588c0ddc27594cabd152e47ffe27ee/mparticle.js",document.head.appendChild(el),trackPageLeave(handlePageLeave),document.getElementById("home-link").addEventListener("click",(function(){console.log("home link clicked"),mParticle.logEvent("click",mParticle.EventType.Navigation,{event_timestamp:(new Date).toISOString(),user_agent:window.navigator.userAgent,page_url:window.location.href,page_title:document.title,page_referrer:document.referrer,event_hanlder:"home-link-click"})}));</script> <script type="module" src="https://tsivaid.github.io/static-web-experiments/mparticle-experiments/index.963ee44e.js"></script><script src="https://tsivaid.github.io/static-web-experiments/mparticle-experiments/index.c972719b.js" nomodule defer></script> </body></html>