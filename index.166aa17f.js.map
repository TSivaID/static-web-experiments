{"mappings":"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","sources":["node_modules/uuid/dist/esm-browser/native.js","node_modules/uuid/dist/esm-browser/rng.js","node_modules/uuid/dist/esm-browser/stringify.js","node_modules/uuid/dist/esm-browser/v4.js","src/set_session_id.ts","src/index.ts","src/analytics/index.ts","src/create_anonymous_user_id.ts"],"sourcesContent":["const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import { v4 as uuidv4 } from 'uuid';\n\nfunction setCookie(name: string, value: string, expires: number | null = null, path: string = '/'): void {\n  let cookieString = name + '=' + value + ';';\n\n  if (expires) {\n    const date = new Date();\n    date.setTime(date.getTime() + expires);\n    cookieString += ' expires=' + date.toUTCString() + ';';\n  }\n\n  cookieString += ' path=' + path + ';';\n  document.cookie = cookieString;\n}\n\nfunction getCookie(name: string): string | null {\n  const nameEQ = name + '=';\n  const cookies = document.cookie.split(';');\n\n  for (let i = 0; i < cookies.length; i++) {\n    let cookie = cookies[i];\n    while (cookie.charAt(0) === ' ') {\n      cookie = cookie.substring(1);\n    }\n    if (cookie.indexOf(nameEQ) === 0) {\n      return cookie.substring(nameEQ.length);\n    }\n  }\n  return null;\n}\n\nexport function checkAndSetSessionId(): void {\n  const sessionId = getCookie('session_id');\n  if (!sessionId) {\n    setCookie('session_id', uuidv4(), null);\n  }\n}\n\n// Initialize the inactivity timer\nexport function initResetTimeout() {\n  let timeout: ReturnType<typeof setTimeout> | null = null;\n\n  function resetTimeout(): void {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n\n    timeout = setTimeout(() => {\n      setCookie('session_id', '', -1); // Delete the session_id cookie\n    }, 30 * 60 * 1000); // 30 minutes\n  }\n\n  // Listen for user activity events to reset the timeout\n  document.addEventListener('mousemove', resetTimeout);\n  document.addEventListener('mousedown', resetTimeout);\n  document.addEventListener('keypress', resetTimeout);\n  document.addEventListener('touchmove', resetTimeout);\n  document.addEventListener('scroll', resetTimeout);\n}\n","import { YourAnalyticsClass } from './analytics';\nimport {  checkAndSetAnonymousId } from './create_anonymous_user_id';\nimport { checkAndSetSessionId, initResetTimeout } from './set_session_id';\n\nconst analytics = new YourAnalyticsClass();\n\ncheckAndSetAnonymousId();\ncheckAndSetSessionId();\ninitResetTimeout();\n\nfunction initModal() {\n  const modal = document.getElementById(\"subscription-modal\") as HTMLElement;\n  const showModalButton = document.getElementById(\"show-modal\") as HTMLButtonElement;\n  const closeButton = document.querySelector(\".close\") as HTMLElement;\n\n  if (!modal || !showModalButton || !closeButton) {\n    return;\n  }\n\n  showModalButton.onclick = () => {\n    modal.style.display = \"block\";\n  };\n\n  closeButton.onclick = () => {\n    modal.style.display = \"none\";\n  };\n\n  window.onclick = (event: MouseEvent) => {\n    if (event.target === modal) {\n      modal.style.display = \"none\";\n    }\n  };\n\n  window.onload = () => {\n    modal.style.display = \"block\";\n    analytics.trackEvent('Page loaded');\n  };\n}\n\ninitModal();\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  // const urlParams = new URLSearchParams(window.location.search);\n  // const title = urlParams.get('title') || 'Default Title';\n  const hash = window.location.hash.substring(1); // Remove the leading #\n  const decodedHash = decodeURIComponent(hash);\n  const title = decodedHash || 'Default Title';\n\n  const storyTitleElement = document.getElementById('story-title');\n  if (storyTitleElement) {\n    storyTitleElement.textContent = title;\n  }\n});\n","export class YourAnalyticsClass {\n  constructor() {\n    // Your constructor logic here\n  }\n\n  public trackEvent(event: string): void {\n    console.log(`Tracking event: ${event}`);\n    // Your tracking logic here\n  }\n}\n","import { v4 as uuidv4 } from 'uuid';\n\nfunction setCookie(name: string, value: string, days: number): void {\n  const date = new Date();\n  date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n  const expires = '; expires=' + date.toUTCString();\n  document.cookie = name + '=' + value + expires + '; path=/';\n}\n\nfunction getCookie(name: string): string | null {\n  const nameEQ = name + '=';\n  const cookies = document.cookie.split(';');\n\n  for (let i = 0; i < cookies.length; i++) {\n    let cookie = cookies[i];\n    while (cookie.charAt(0) === ' ') {\n      cookie = cookie.substring(1);\n    }\n    if (cookie.indexOf(nameEQ) === 0) {\n      return cookie.substring(nameEQ.length);\n    }\n  }\n  return null;\n}\n\nexport function checkAndSetAnonymousId(): void {\n  const anonymousId = getCookie('anonymous_user_id');\n  if (!anonymousId) {\n    setCookie('anonymous_user_id', uuidv4(), 365);\n  }\n}\n"],"names":["$37f105a7b9674789$export$2e2bcd8739ae039","crypto","randomUUID","bind","$1ac7e0985a17c228$var$getRandomValues","$1ac7e0985a17c228$var$rnds8","Uint8Array","$1ac7e0985a17c228$export$2e2bcd8739ae039","getRandomValues","Error","$bd59f5a7d9c833e9$var$byteToHex","i","push","toString","slice","$bd59f5a7d9c833e9$export$8fb373d660548968","arr","offset","toLowerCase","$e3a4bb9406254d13$export$2e2bcd8739ae039","options","buf","rnds","random","rng","$a67b2f67da0a1be2$var$setCookie","name","value","expires","path","cookieString","date","Date","setTime","getTime","toUTCString","document","cookie","$62c72e5241014c60$var$analytics","trackEvent","event","console","log","constructor","nameEQ","cookies","split","length","charAt","substring","indexOf","$e96cbcc8fe438ae9$var$getCookie","days","$e96cbcc8fe438ae9$var$setCookie","$a67b2f67da0a1be2$var$getCookie","timeout","resetTimeout","clearTimeout","setTimeout","addEventListener","modal","getElementById","showModalButton","closeButton","querySelector","onclick","style","display","window","target","onload","$62c72e5241014c60$var$initModal","hash","location","title","decodeURIComponent","storyTitleElement","textContent"],"version":3,"file":"index.166aa17f.js.map"}